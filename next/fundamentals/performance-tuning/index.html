<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-fundamentals/performance-tuning" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">Performance tuning | Nethermind documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://github.com/NethermindEth/docs/assets/35319980/163ba000-69b1-45c6-86eb-e8c53109839f"><meta data-rh="true" name="twitter:image" content="https://github.com/NethermindEth/docs/assets/35319980/163ba000-69b1-45c6-86eb-e8c53109839f"><meta data-rh="true" property="og:url" content="https://docs.nethermind.io/next/fundamentals/performance-tuning"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Performance tuning | Nethermind documentation"><meta data-rh="true" name="description" content="By default, Nethermind is configured for general use cases that fit well for most users. However, to improve various aspects of Nethermind performance, there are options for different subsystems that can be configured for your specific needs."><meta data-rh="true" property="og:description" content="By default, Nethermind is configured for general use cases that fit well for most users. However, to improve various aspects of Nethermind performance, there are options for different subsystems that can be configured for your specific needs."><link data-rh="true" rel="icon" href="/images/favicon.svg"><link data-rh="true" rel="canonical" href="https://docs.nethermind.io/next/fundamentals/performance-tuning"><link data-rh="true" rel="alternate" href="https://docs.nethermind.io/next/fundamentals/performance-tuning" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.nethermind.io/next/fundamentals/performance-tuning" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://4I20VAM8JS-dsn.algolia.net" crossorigin="anonymous"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Performance tuning","item":"https://docs.nethermind.io/next/fundamentals/performance-tuning"}]}</script><link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-4JDCNMPQ22"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-4JDCNMPQ22",{})</script>



<link rel="search" type="application/opensearchdescription+xml" title="Nethermind documentation" href="/opensearch.xml">

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="crossorigin">
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=DM+Mono:ital,wght@0,300;0,400;0,500;1,300;1,400;1,500&amp;family=DM+Sans:ital,opsz,wght@0,9..40,300;0,9..40,400;0,9..40,500;0,9..40,600;0,9..40,700;1,9..40,300;1,9..40,400;1,9..40,500;1,9..40,600;1,9..40,700&amp;family=Exo:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&amp;display=swap"><link rel="stylesheet" href="/assets/css/styles.0ada5bdd.css">
<script src="/assets/js/runtime~main.0119f02d.js" defer="defer"></script>
<script src="/assets/js/main.26f3ea4e.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/images/logo_dark.svg"><link rel="preload" as="image" href="/images/logo_light.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" target="_self" href="/"><div class="navbar__logo"><img src="/images/logo_dark.svg" alt="Nethermind" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/images/logo_light.svg" alt="Nethermind" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div></a><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/next/fundamentals/performance-tuning">Next</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/next/fundamentals/performance-tuning">Next</a></li><li><a class="dropdown__link" href="/fundamentals/performance-tuning">1.32.0</a></li><li><a class="dropdown__link" href="/1.31.0/fundamentals/performance-tuning">1.31.0</a></li><li><a class="dropdown__link" href="/1.30.0/fundamentals/performance-tuning">1.30.0</a></li><li><a class="dropdown__link" href="/1.29.0/fundamentals/performance-tuning">1.29.0</a></li><li><a class="dropdown__link" href="/1.28.0/fundamentals/performance-tuning">1.28.0</a></li></ul></div></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/NethermindEth/nethermind" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-social-link header-github-icon" aria-label="GitHub"></a><a href="https://discord.com/invite/PaCMRFdvWT" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-social-link header-discord-icon" aria-label="Discord"></a><a href="https://x.com/NethermindEth" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-social-link header-x-icon" aria-label="X"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/next/">Get started</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/next/fundamentals/configuration">Fundamentals</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/next/fundamentals/configuration">Configuration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/next/fundamentals/sync">Sync</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/next/fundamentals/security">Security</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/next/fundamentals/logs">Logs</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/next/fundamentals/database">Database</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/next/fundamentals/pruning">Pruning</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/next/fundamentals/performance-tuning">Performance tuning</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/next/fundamentals/private-networks">Private networks</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/next/fundamentals/history-expiry">History expiry</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/next/interacting/json-rpc-server">Interacting with Nethermind</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/next/monitoring/metrics/">Monitoring</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/next/validators/">Validators</a><button aria-label="Expand sidebar category &#x27;Validators&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/next/developers/building-from-source">Developers</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/next/troubleshooting">Troubleshooting</a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is unreleased documentation for <!-- -->Nethermind documentation<!-- --> <b>Next</b> version.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/fundamentals/performance-tuning">latest version</a></b> (<!-- -->1.32.0<!-- -->).</div></div><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Fundamentals</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Performance tuning</span></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: Next</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Performance tuning</h1></header><p>By default, Nethermind is configured for general use cases that fit well for most users. However, to improve various aspects of Nethermind performance, there are options for different subsystems that can be configured for your specific needs.</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>This guide uses some undocumented configuration options that are not intended for the general public and may change in future releases.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="peer-discovery">Peer discovery<a href="#peer-discovery" class="hash-link" aria-label="Direct link to Peer discovery" title="Direct link to Peer discovery">​</a></h2>
<p>To connect to the Ethereum network, Nethermind needs to maintain connections to other clients. The number of connections can be configured with <a href="/next/fundamentals/configuration#network-maxactivepeers"><code>Network.MaxActivePeers</code></a> configuration option. The default value depends on the network. Increasing this number may reduce syncing time, while reducing this number may help with attestation performance.
Also, you can increase the rate at which a new connection is established with <code>Network.MaxOutgoingConnectPerSec</code>. The default value is 20 while 50 would be a reasonable higher value. This tends to reduce the snap sync time; however, some ISPs may throttle your Internet connection if you set this value too high. Also, some Wi-Fi routers may hang if the value is set too high.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="port-forwarding">Port forwarding<a href="#port-forwarding" class="hash-link" aria-label="Direct link to Port forwarding" title="Direct link to Port forwarding">​</a></h2>
<p>While port forwarding is not strictly required, it helps significantly with finding peers and is essential for the network&#x27;s overall health. The exact steps for port forwarding highly depend on your environment, router, and ISP. For most home configurations, automatic port forwarding can be turned on with <a href="/next/fundamentals/configuration#network-enableupnp"><code>Network.EnableUPnP</code></a>.
Some ISPs are more restrictive and do not support port forwarding and/or utilize provider-level NAT. In such cases, your best option is to use a VPN that supports port forwarding. Keep in mind that consensus clients need a separate port forwarding.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="sync-time">Sync time<a href="#sync-time" class="hash-link" aria-label="Direct link to Sync time" title="Direct link to Sync time">​</a></h2>
<p>On the Ethereum mainnet, most of the syncing time is split into three phases: snap sync, old bodies, and old receipts. Strictly speaking, there are also fast sync, full sync, and state sync phases. However, they usually complete in less than a minute, with state sync usually taking up to 3 minutes.</p>
<p>At the moment, the best test case sync time is 1 hour 50 minutes for all phases with the following configuration:</p>
<ul>
<li>
<p>CPU: AMD Ryzen 9 7950X</p>
</li>
<li>
<p>Memory: 128GB RAM</p>
</li>
<li>
<p>Storage: Intel Optane SSD 905P Series 900GB</p>
</li>
<li>
<p>Network: 1 Gbps Internet with TorGuard VPN with WireGuard protocol. Both execution and consensus clients port forwarding are set up manually.</p>
</li>
<li>
<p>Command line options:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">--network-enableupnp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--network-maxoutgoingconnectpersec 50</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--network-processingthreadcount 32</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--sync-tunedbmode HeavyWrite</span><br></span></code></pre></div></div>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="snap-sync">Snap sync<a href="#snap-sync" class="hash-link" aria-label="Direct link to Snap sync" title="Direct link to Snap sync">​</a></h2>
<p>Snap sync is the process of downloading the Ethereum state tree. After it is complete, and after the state sync phase, Nethermind can process and follow the chain. The fastest tested snap sync and state sync time is 25 minutes.
This phase is the most I/O-intensive sync phase, and therefore, assuming a fast internet, the sync time highly depends on your SSD&#x27;s write speed. Remember that most SSDs only advertise peak write speed, usually above 5GB/s. However, they tend to slow down significantly to around 0.5GB/s (or even less for a QLC SSD) after a few seconds. Therefore, look for SSDs with high sustained write speed.</p>
<p>Also, ensuring your SSD is sufficiently cooled to prevent thermal throttling is essential. This is often overlooked as most workloads rarely stress SSD as much; however, to reduce sync time, Nethermind will utilize your SSD to its limit.</p>
<p>Nethermind temporarily changes the database configuration during sync to optimize it for writing, notably the option <code>Sync.TuneDbMode</code> is set to <code>HeavyWrite</code> by default. On some systems with slow SSDs, the setting the <code>Sync.TuneDbMode</code> to <code>AggressiveHeavyWrite</code> may give some boost. Also, the compaction can be disabled altogether by setting the <code>Sync.TuneDbMode</code> to <code>DisableCompaction</code>. This is likely faster for systems using entry-level NVMe SSDs and is also useful to extend the lifespan of your SSD as it provides the lowest total writes possible. However, it uses about 3GB of extra memory during snap sync. The state sync phase may appear to hang for about 10 minutes as the whole database compacts for the first time after snap sync.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="old-bodies-and-receipts">Old bodies and receipts<a href="#old-bodies-and-receipts" class="hash-link" aria-label="Direct link to Old bodies and receipts" title="Direct link to Old bodies and receipts">​</a></h2>
<p>Old bodies and old receipts are the process of downloading block bodies and receipts. This is required for some RPC methods, such as <code>eth_getLogs</code>, and for consensus clients to work correctly. If you don&#x27;t need them, skip this phase by setting the <a href="/next/fundamentals/configuration#sync-downloadbodiesinfastsync"><code>Sync.DownloadBodiesInFastSync</code></a> to <code>false</code>, <a href="/next/fundamentals/configuration#sync-downloadreceiptsinfastsync"><code>Sync.DownloadReceiptsInFastSync</code></a> to <code>false</code>, and <a href="/next/fundamentals/configuration#sync-nonvalidatornode"><code>Sync.NonValidatorNode</code></a> to <code>true</code>.</p>
<p>Old bodies and receipts are mainly limited by your Internet connection. With a 1Gbps connection, they consume around 250MB/s and 500MB/s of writes, respectively, which is generally reasonable for most PCIE SSDs. On older systems or VPS with low single thread performance and high Internet speed, the block body deserialization may be a bottleneck, in which case, you can increase the number of network processing threads by setting <code>Network.ProcessingThreadCount</code> to <code>32</code>. However, this may impact block processing time.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="block-processing-time-and-attestation">Block processing time and attestation<a href="#block-processing-time-and-attestation" class="hash-link" aria-label="Direct link to Block processing time and attestation" title="Direct link to Block processing time and attestation">​</a></h2>
<p>Block processing time is primarily limited by SSD performance. In practice, it is the SSD&#x27;s <em>response time</em>, not just its IOPS, that matters. However, since most SSDs don&#x27;t advertise response times, IOPS often serves as a useful approximation.</p>
<p>Nethermind includes a <em>prewarming</em> feature that parallelizes state reads by executing transactions concurrently, warming up state reads for the main block processing. This effectively hides SSD latency, although it increases CPU usage. For non-validator nodes, where RPC throughput is more important, you can turn off this optimization by setting the <a href="/next/fundamentals/configuration#blocks-prewarmstateonblockprocessing"><code>Blocks.PreWarmStateOnBlockProcessing</code></a> option to <code>false</code>. While disabling prewarming may conserve CPU resources, the benefits are typically minor.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="memory">Memory<a href="#memory" class="hash-link" aria-label="Direct link to Memory" title="Direct link to Memory">​</a></h2>
<p>Ethereum aims to be maximally decentralized, so the default Nethermind configuration minimizes system resource usage. However, several tunable parameters are available if your system has large enough memory.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="at-least-32-gb">At least 32 GB<a href="#at-least-32-gb" class="hash-link" aria-label="Direct link to At least 32 GB" title="Direct link to At least 32 GB">​</a></h3>
<p>For systems with at least 32 GB of memory, the following configuration is recommended:</p>
<ul>
<li>
<p><code>Pruning.CacheMb: 2000</code></p>
<p>The <a href="/next/fundamentals/pruning#in-memory-cache-size">pruning cache</a> increased from 1 GB to 2 GB, reducing total SSD writes by roughly a factor of 3 (note that ~500 MB of cache is retained for snap serving).</p>
</li>
<li>
<p><code>Db.StateDbWriteBufferSize: 100000000</code></p>
<p>The write buffer size should be increased proportionally with the pruning cache to avoid extended pruning times that might block attestation.</p>
</li>
<li>
<p><code>Db.StateDbAdditionalRocksDbOptions: &quot;block_based_table_factory={index_type=kBinarySearch;partition_filters=0;};&quot;</code></p>
<p>Changes the database index not to use the partitioned index, improving latency at the cost of ~500 MB of additional memory.</p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="at-least-128-gb">At least 128 GB<a href="#at-least-128-gb" class="hash-link" aria-label="Direct link to At least 128 GB" title="Direct link to At least 128 GB">​</a></h3>
<p>For systems with at least 128 GB of memory, the following configuration is recommended:</p>
<ul>
<li>
<p><code>Pruning.CacheMb: 4000</code></p>
<p>The <a href="/next/fundamentals/pruning#in-memory-cache-size">pruning cache</a> is increased to 4 GB, and the write buffer size to 200 MB.</p>
</li>
<li>
<p><code>Db.StateDbWriteBufferSize: 200000000</code></p>
</li>
<li>
<p><code>Db.StateDbAdditionalRocksDbOptions: &quot;block_based_table_factory={index_type=kBinarySearch;partition_filters=0;};&quot;</code></p>
</li>
<li>
<p><code>Db.StateDbEnableFileWarmer: true</code></p>
<p>Enabling the file warmer primes the OS cache by reading the database files at startup. Without this option, the OS cache can take several weeks to warm up naturally.</p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="at-least-350-gb">At least 350 GB<a href="#at-least-350-gb" class="hash-link" aria-label="Direct link to At least 350 GB" title="Direct link to At least 350 GB">​</a></h3>
<p>For systems with at least 350 GB of memory, where the entire state can be loaded into memory, beneficial for RPC providers, the following configuration is recommended:</p>
<ul>
<li>
<p><code>Pruning.CacheMb: 4000</code></p>
<p>The <a href="/next/fundamentals/pruning#in-memory-cache-size">pruning cache</a> is increased to 4 GB, and the write buffer size to 200 MB.</p>
</li>
<li>
<p><code>Db.StateDbWriteBufferSize: 200000000</code></p>
</li>
<li>
<p><code>Db.StateDbAdditionalRocksDbOptions: &quot;block_based_table_factory={index_type=kBinarySearch;block_size=4092;block_restart_interval=2;partition_filters=0};compression=kNoCompression;allow_mmap_reads=1;&quot;</code></p>
<p>Turning off the database compression and using a less compact encoding increases the database size (approximately 280 GB compared to the standard 160 GB) but offers a more CPU-efficient encoding for block processing. It also enables memory-mapped (MMAP) reads, which skip RocksDB&#x27;s internal block cache and the memory allocator. Note, however, that to enable MMAP verification, checksum needs to be disabled.</p>
</li>
<li>
<p><code>Db.StateDbVerifyChecksum: false</code></p>
<p>In addition to prewarming, state access typically accounts for less than 10% of block processing time. This is notable, especially with server CPU, where the low frequency tends to result in higher block processing latency.</p>
</li>
</ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/NethermindEth/docs/tree/main/docs/fundamentals/performance-tuning.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2025-07-09T17:42:04.000Z" itemprop="dateModified">Jul 9, 2025</time></b></span></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/next/fundamentals/pruning"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Pruning</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/next/fundamentals/private-networks"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Private networks</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#peer-discovery" class="table-of-contents__link toc-highlight">Peer discovery</a></li><li><a href="#port-forwarding" class="table-of-contents__link toc-highlight">Port forwarding</a></li><li><a href="#sync-time" class="table-of-contents__link toc-highlight">Sync time</a></li><li><a href="#snap-sync" class="table-of-contents__link toc-highlight">Snap sync</a></li><li><a href="#old-bodies-and-receipts" class="table-of-contents__link toc-highlight">Old bodies and receipts</a></li><li><a href="#block-processing-time-and-attestation" class="table-of-contents__link toc-highlight">Block processing time and attestation</a></li><li><a href="#memory" class="table-of-contents__link toc-highlight">Memory</a><ul><li><a href="#at-least-32-gb" class="table-of-contents__link toc-highlight">At least 32 GB</a></li><li><a href="#at-least-128-gb" class="table-of-contents__link toc-highlight">At least 128 GB</a></li><li><a href="#at-least-350-gb" class="table-of-contents__link toc-highlight">At least 350 GB</a></li></ul></li></ul></div></div></div></div></main></div></div></div></div>
</body>
</html>