"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[4971],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>g});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=r.createContext({}),d=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},p=function(e){var t=d(e.components);return r.createElement(s.Provider,{value:t},e.children)},u="mdxType",f={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,s=e.parentName,p=o(e,["components","mdxType","originalType","parentName"]),u=d(n),m=a,g=u["".concat(s,".").concat(m)]||u[m]||f[m]||i;return n?r.createElement(g,l(l({ref:t},p),{},{components:n})):r.createElement(g,l({ref:t},p))}));function g(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,l=new Array(i);l[0]=m;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o[u]="string"==typeof e?e:a,l[1]=o;for(var d=2;d<i;d++)l[d]=n[d];return r.createElement.apply(null,l)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"},9629:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>l,default:()=>f,frontMatter:()=>i,metadata:()=>o,toc:()=>d});var r=n(7462),a=(n(7294),n(3905));const i={},l="Pruning",o={unversionedId:"fundamentals/configuration/pruning",id:"fundamentals/configuration/pruning",title:"Pruning",description:"Configuration of the pruning parameters (pruning is the process of removing some of the intermediary state nodes - it",source:"@site/docs/02-fundamentals/04-configuration/pruning.md",sourceDirName:"02-fundamentals/04-configuration",slug:"/fundamentals/configuration/pruning",permalink:"/docs/fundamentals/configuration/pruning",draft:!1,editUrl:"https://github.com/NethermindEth/docs/tree/main/docs/docs/02-fundamentals/04-configuration/pruning.md",tags:[],version:"current",lastUpdatedAt:1692227448,formattedLastUpdatedAt:"Aug 16, 2023",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Plugin",permalink:"/docs/fundamentals/configuration/plugin"},next:{title:"Receipt",permalink:"/docs/fundamentals/configuration/receipt"}},s={},d=[],p={toc:d},u="wrapper";function f(e){let{components:t,...n}=e;return(0,a.kt)(u,(0,r.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"pruning"},"Pruning"),(0,a.kt)("p",null,"Configuration of the pruning parameters (pruning is the process of removing some of the intermediary state nodes - it\nsaves some disk space but makes most of the historical state queries fail)."),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:"left"},"Property"),(0,a.kt)("th",{parentName:"tr",align:"left"},"Env Variable"),(0,a.kt)("th",{parentName:"tr",align:"left"},"Description"),(0,a.kt)("th",{parentName:"tr",align:"left"},"Default"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},"AvailableSpaceCheckEnabled"),(0,a.kt)("td",{parentName:"tr",align:"left"},"NETHERMIND_PRUNINGCONFIG_AVAILABLESPACECHECKENABLED"),(0,a.kt)("td",{parentName:"tr",align:"left"},"Enables available disk space check."),(0,a.kt)("td",{parentName:"tr",align:"left"},"true")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},"CacheMb"),(0,a.kt)("td",{parentName:"tr",align:"left"},"NETHERMIND_PRUNINGCONFIG_CACHEMB"),(0,a.kt)("td",{parentName:"tr",align:"left"},"'Memory' pruning: Pruning cache size in MB (amount if historical nodes data to store in cache - the bigger the cache the bigger the disk space savings)."),(0,a.kt)("td",{parentName:"tr",align:"left"},"1024")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},"FullPruningCompletionBehavior"),(0,a.kt)("td",{parentName:"tr",align:"left"},"NETHERMIND_PRUNINGCONFIG_FULLPRUNINGCOMPLETIONBEHAVIOR"),(0,a.kt)("td",{parentName:"tr",align:"left"},"Determines what to do after Nethermind completes a full prune. 'None': does not take any special action. 'ShutdownOnSuccess': shuts Nethermind down if the full prune succeeded. 'AlwaysShutdown': shuts Nethermind down once the prune completes, whether it succeeded or failed."),(0,a.kt)("td",{parentName:"tr",align:"left"},"None")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},"FullPruningDisableLowPriorityWrites"),(0,a.kt)("td",{parentName:"tr",align:"left"},"NETHERMIND_PRUNINGCONFIG_FULLPRUNINGDISABLELOWPRIORITYWRITES"),(0,a.kt)("td",{parentName:"tr",align:"left"},"Full pruning uses low priority writes to prevent blocking block processing. If not needed, set this to true for faster full pruning."),(0,a.kt)("td",{parentName:"tr",align:"left"},"false")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},"FullPruningMaxDegreeOfParallelism"),(0,a.kt)("td",{parentName:"tr",align:"left"},"NETHERMIND_PRUNINGCONFIG_FULLPRUNINGMAXDEGREEOFPARALLELISM"),(0,a.kt)("td",{parentName:"tr",align:"left"},"'Full' pruning: Defines how many parallel tasks and potentially used threads can be created by full pruning. -1 - number of logical processors, 0 - 25% of logical processors, 1 - full pruning will run on single thread. Recommended value depends on the type of the node. If the node needs to be responsive (its RPC or Validator node) then recommended value is the default value or below is recommended. If the node doesn't have much other responsibilities but needs to be reliably be able to follow the chain without any delays and produce live logs - the default value or above is recommended. If the node doesn't have to be responsive, has very fast I/O (like NVME) and the shortest pruning time is to be achieved, this can be set to the number of logical processors (-1)."),(0,a.kt)("td",{parentName:"tr",align:"left"},"0")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},"FullPruningMemoryBudgetMb"),(0,a.kt)("td",{parentName:"tr",align:"left"},"NETHERMIND_PRUNINGCONFIG_FULLPRUNINGMEMORYBUDGETMB"),(0,a.kt)("td",{parentName:"tr",align:"left"},"Set the memory budget used for the trie visit. Increasing this significantly reduces read iops requirement at expense of RAM. Default depend on network. Set to 0 to disable."),(0,a.kt)("td",{parentName:"tr",align:"left"},"4000")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},"FullPruningMinimumDelayHours"),(0,a.kt)("td",{parentName:"tr",align:"left"},"NETHERMIND_PRUNINGCONFIG_FULLPRUNINGMINIMUMDELAYHOURS"),(0,a.kt)("td",{parentName:"tr",align:"left"},"In order to not exhaust disk writes, there is a minimum delay between allowed full pruning operations."),(0,a.kt)("td",{parentName:"tr",align:"left"},"240")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},"FullPruningThresholdMb"),(0,a.kt)("td",{parentName:"tr",align:"left"},"NETHERMIND_PRUNINGCONFIG_FULLPRUNINGTHRESHOLDMB"),(0,a.kt)("td",{parentName:"tr",align:"left"},"'Full' pruning: Defines threshold in MB to trigger full pruning, depends on 'Mode' and 'FullPruningTrigger'."),(0,a.kt)("td",{parentName:"tr",align:"left"},"256000")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},"FullPruningTrigger"),(0,a.kt)("td",{parentName:"tr",align:"left"},"NETHERMIND_PRUNINGCONFIG_FULLPRUNINGTRIGGER"),(0,a.kt)("td",{parentName:"tr",align:"left"},"'Full' pruning: Defines trigger for full pruning, manuel trigger is always supported via admin_prune RPC call. Either size of StateDB or free space left on Volume where StateDB is located can be configured as auto triggers. Possible values: 'Manual', 'StateDbSize', 'VolumeFreeSpace'."),(0,a.kt)("td",{parentName:"tr",align:"left"},"Manual")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},"Mode"),(0,a.kt)("td",{parentName:"tr",align:"left"},"NETHERMIND_PRUNINGCONFIG_MODE"),(0,a.kt)("td",{parentName:"tr",align:"left"},"Sets pruning mode. Possible values: 'None', 'Memory', 'Full', 'Hybrid'."),(0,a.kt)("td",{parentName:"tr",align:"left"},"Hybrid")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},"PersistenceInterval"),(0,a.kt)("td",{parentName:"tr",align:"left"},"NETHERMIND_PRUNINGCONFIG_PERSISTENCEINTERVAL"),(0,a.kt)("td",{parentName:"tr",align:"left"},"'Memory' pruning: Defines how often blocks will be persisted even if not required by cache memory usage (the bigger the value the bigger the disk space savings)"),(0,a.kt)("td",{parentName:"tr",align:"left"},"8192")))))}f.isMDXComponent=!0}}]);