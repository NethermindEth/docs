"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[4465],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>u});var a=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var s=a.createContext({}),d=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},p=function(e){var t=d(e.components);return a.createElement(s.Provider,{value:t},e.children)},m="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},g=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,l=e.originalType,s=e.parentName,p=o(e,["components","mdxType","originalType","parentName"]),m=d(n),g=i,u=m["".concat(s,".").concat(g)]||m[g]||c[g]||l;return n?a.createElement(u,r(r({ref:t},p),{},{components:n})):a.createElement(u,r({ref:t},p))}));function u(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var l=n.length,r=new Array(l);r[0]=g;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o[m]="string"==typeof e?e:i,r[1]=o;for(var d=2;d<l;d++)r[d]=n[d];return a.createElement.apply(null,r)}return a.createElement.apply(null,n)}g.displayName="MDXCreateElement"},5616:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>r,default:()=>c,frontMatter:()=>l,metadata:()=>o,toc:()=>d});var a=n(7462),i=(n(7294),n(3905));const l={title:"Logs",sidebar_position:4},r=void 0,o={unversionedId:"fundamentals/logs",id:"fundamentals/logs",title:"Logs",description:"Log config file location",source:"@site/docs/fundamentals/logs.md",sourceDirName:"fundamentals",slug:"/fundamentals/logs",permalink:"/docs/fundamentals/logs",draft:!1,editUrl:"https://github.com/NethermindEth/docs/tree/main/docs/docs/fundamentals/logs.md",tags:[],version:"current",lastUpdatedAt:1695071442,formattedLastUpdatedAt:"Sep 18, 2023",sidebarPosition:4,frontMatter:{title:"Logs",sidebar_position:4},sidebar:"tutorialSidebar",previous:{title:"Security",permalink:"/docs/fundamentals/security"},next:{title:"Database",permalink:"/docs/fundamentals/database"}},s={},d=[{value:"Log config file location",id:"log-config-file-location",level:2},{value:"Log config file syntax",id:"log-config-file-syntax",level:2},{value:"Config or CLI log rules",id:"config-or-cli-log-rules",level:2},{value:"Global logging override",id:"global-logging-override",level:2},{value:"JSON RPC logging level",id:"json-rpc-logging-level",level:2},{value:"Enterprise Logging",id:"enterprise-logging",level:2},{value:"Explaining Nethermind logs",id:"explaining-nethermind-logs",level:2}],p={toc:d},m="wrapper";function c(e){let{components:t,...l}=e;return(0,i.kt)(m,(0,a.Z)({},p,l,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h2",{id:"log-config-file-location"},"Log config file location"),(0,i.kt)("p",null,"Logging in Nethermind is done via NLog library that can be configured by editing the NLog.config file."),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Environment Type"),(0,i.kt)("th",{parentName:"tr",align:null},"NLog.config location"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"built from src - Debug mode"),(0,i.kt)("td",{parentName:"tr",align:null},"src\\Nethermind\\Nethermind.Runner\\bin\\Debug\\netcoreapp3.1\\NLog.config")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"built from src - Release mode"),(0,i.kt)("td",{parentName:"tr",align:null},"src\\Nethermind\\Nethermind.Runner\\bin\\Release\\netcoreapp3.1\\NLog.config")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"PPA"),(0,i.kt)("td",{parentName:"tr",align:null},"/usr/share/nethermind/NLog.config")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"Docker"),(0,i.kt)("td",{parentName:"tr",align:null},"/nethermind/NLog.config")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"from ",(0,i.kt)("a",{parentName:"td",href:"https://downloads.nethermind.io"},"downloads page")),(0,i.kt)("td",{parentName:"tr",align:null},"top level directory after unzipping the package")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"from ",(0,i.kt)("a",{parentName:"td",href:"https://github.com/NethermindEth/nethermind/releases"},"GitHub releases page")),(0,i.kt)("td",{parentName:"tr",align:null},"top level directory after unzipping the package")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"dAppNode"),(0,i.kt)("td",{parentName:"tr",align:null},"? ","[","to be documented]")))),(0,i.kt)("h2",{id:"log-config-file-syntax"},"Log config file syntax"),(0,i.kt)("p",null,"Detailed NLog configuration options can be found\nhere: ",(0,i.kt)("a",{parentName:"p",href:"https://nlog-project.org/config/"},"https://nlog-project.org/config/")),(0,i.kt)("h2",{id:"config-or-cli-log-rules"},"Config or CLI log rules"),(0,i.kt)("p",null,"Simple logging rules can be added through configuration file or command line argument."),(0,i.kt)("p",null,"For example this would add ",(0,i.kt)("inlineCode",{parentName:"p"},"Trace")," level logs to any logger under ",(0,i.kt)("inlineCode",{parentName:"p"},"Synchronization")," module and ",(0,i.kt)("inlineCode",{parentName:"p"},"Debug")," level logs\nfor ",(0,i.kt)("inlineCode",{parentName:"p"},"BlockTree")," from ",(0,i.kt)("inlineCode",{parentName:"p"},"Blockchain")," module:\\\n",(0,i.kt)("inlineCode",{parentName:"p"},"--Init.LogRules Synchronization.*:Trace;Blockchain.BlockTree:Debug")),(0,i.kt)("h2",{id:"global-logging-override"},"Global logging override"),(0,i.kt)("p",null,"Additionally there are global logging override that you can use temporarily:"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Command line override"),(0,i.kt)("th",{parentName:"tr",align:null},"Log level"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"./Nethermind.Runner --config mainnet --log TRACE"),(0,i.kt)("td",{parentName:"tr",align:null},"TRACE")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"./Nethermind.Runner --config mainnet --log DEBUG"),(0,i.kt)("td",{parentName:"tr",align:null},"DEBUG")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"./Nethermind.Runner --config mainnet --log INFO"),(0,i.kt)("td",{parentName:"tr",align:null},"INFO")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"./Nethermind.Runner --config mainnet --log WARN"),(0,i.kt)("td",{parentName:"tr",align:null},"WARN")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"./Nethermind.Runner --config mainnet --log ERROR"),(0,i.kt)("td",{parentName:"tr",align:null},"ERROR")))),(0,i.kt)("h2",{id:"json-rpc-logging-level"},"JSON RPC logging level"),(0,i.kt)("p",null,"This can be done by including these lines in the logging configuration file:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'<logger name="JsonRpc.*" minlevel="Error" writeTo="file-async"/>\n<logger name="JsonRpc.*" minlevel="Error" writeTo="auto-colored-console-async" final="true"/>\n<logger name="JsonRpc.*" final="true"/>\n')),(0,i.kt)("h2",{id:"enterprise-logging"},"Enterprise Logging"),(0,i.kt)("p",null,"See how to configure Seq ",(0,i.kt)("a",{parentName:"p",href:"https://docs.nethermind.io/nethermind/enterprise/seq"},"here")),(0,i.kt)("h2",{id:"explaining-nethermind-logs"},"Explaining Nethermind logs"),(0,i.kt)("p",null,"You can check the supported operating systems, architectures and hardware requirements\nhere: ",(0,i.kt)("a",{parentName:"p",href:"/docs/get-started/system-requirements"},"system-requirements.md")),(0,i.kt)("p",null,"After the node starts, you will see some initial info about the node and then the sync will start. G\xf6rli fast sync uses\na ",(0,i.kt)("inlineCode",{parentName:"p"},"fast blocks")," sync mode initially. The ",(0,i.kt)("inlineCode",{parentName:"p"},"fast blocks")," sync picks some known ",(0,i.kt)("inlineCode",{parentName:"p"},"pivot block")," from the past and\ndownloads ",(0,i.kt)("inlineCode",{parentName:"p"},"headers"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"bodies"),", and ",(0,i.kt)("inlineCode",{parentName:"p"},"receipts")," downwards all the way to ",(0,i.kt)("inlineCode",{parentName:"p"},"genesis block"),". All blocks from 0 to\nthe ",(0,i.kt)("inlineCode",{parentName:"p"},"pivot block")," are showed as ",(0,i.kt)("inlineCode",{parentName:"p"},"Old Headers")," in the ",(0,i.kt)("inlineCode",{parentName:"p"},"fast blocks sync")," logs. The console display shows the number\ngrowing from 0 to pivot, but this is just to make the display more user-friendly."),(0,i.kt)("p",null,"You will see some information about the sync progress, like below:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Shows the number of already downloaded ",(0,i.kt)("inlineCode",{parentName:"li"},"headers"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"bodies")," and ",(0,i.kt)("inlineCode",{parentName:"li"},"receipts")," under the name ",(0,i.kt)("inlineCode",{parentName:"li"},"Downloaded")," out of all to\nbe downloaded in the fast blocks stage."),(0,i.kt)("li",{parentName:"ol"},"Shows the current queue of already downloaded ",(0,i.kt)("inlineCode",{parentName:"li"},"blocks"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"headers")," and ",(0,i.kt)("inlineCode",{parentName:"li"},"receipts")," waiting for being saved to the\ndatabase."),(0,i.kt)("li",{parentName:"ol"},"Shows the current download speed (blocks per second - bps)."),(0,i.kt)("li",{parentName:"ol"},"Shows the average download speed (blocks per second - bps).")),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Fast blocks sync logs",src:n(7535).Z,width:"1219",height:"572"})),(0,i.kt)("p",null,"When the fast blocks stage finishes, there will be some period of downloading blocks between the ",(0,i.kt)("inlineCode",{parentName:"p"},"pivot")," and\nthe",(0,i.kt)("inlineCode",{parentName:"p"},"latest blocks")," which will have some additional info:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Shows the last entry from the fast blocks stage."),(0,i.kt)("li",{parentName:"ol"},"Shows the mode transition moment."),(0,i.kt)("li",{parentName:"ol"},"Displays the speed (in blocks per second) of all ",(0,i.kt)("inlineCode",{parentName:"li"},"headers"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"bodies")," and ",(0,i.kt)("inlineCode",{parentName:"li"},"receipts")," at the same time."),(0,i.kt)("li",{parentName:"ol"},"Additional info will appear every 30000 blocks with information about the G\xf6rli epoch being stored.")),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"G\xf6rli fast sync logs",src:n(6833).Z,width:"1528",height:"643"})),(0,i.kt)("p",null,"After the ",(0,i.kt)("inlineCode",{parentName:"p"},"fast sync")," part finished, the node will transition to the ",(0,i.kt)("inlineCode",{parentName:"p"},"state sync stage")," when the ",(0,i.kt)("inlineCode",{parentName:"p"},"state trie")," is being\ndownloaded. Much information is displayed about the progress, as this process may take a long time on mainnet (a few\nhours)."),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Total elapsed time in ",(0,i.kt)("inlineCode",{parentName:"li"},"state sync")," is displayed."),(0,i.kt)("li",{parentName:"ol"},"The total percentage of downloaded DB size is displayed (on mainnet the sync finishes around 34GB in March 2020, on\nG\xf6rli around 800MB)."),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("inlineCode",{parentName:"li"},"branches")," stands for the percentage of downloaded branches."),(0,i.kt)("li",{parentName:"ol"},"Download speed in kilobytes per second is displayed."),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("inlineCode",{parentName:"li"},"accounts")," stands for the number of accounts data downloaded already."),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("inlineCode",{parentName:"li"},"nodes")," stands for the number of ",(0,i.kt)("inlineCode",{parentName:"li"},"Patricia trie nodes")," downloaded by the sync process."),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("inlineCode",{parentName:"li"},"diagnostic")," shows the time spent in the DB write / read access. The higher the value, the worse. It may get much\nworse if you restart the node during the sync process, as we need to recreate some caches then by reading data from\nthe DB.")),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"G\xf6rli state sync logs",src:n(523).Z,width:"1528",height:"742"})),(0,i.kt)("p",null,"When the state sync is nearing completion, you may see a series of ",(0,i.kt)("inlineCode",{parentName:"p"},"branch sync")," information reloading many times from\n0% to nearly 100%. This is the node trying to retrieve the few remaining state nodes and progressing with the head block\nrapidly:"),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"G\xf6rli branch sync logs",src:n(6103).Z,width:"1441",height:"572"})),(0,i.kt)("p",null,"At some point, the entire state is downloaded and the node enters the ",(0,i.kt)("inlineCode",{parentName:"p"},"full sync")," mode and will allow you to issue CLI /\nWeb3 queries and send / receive transactions\ud83e\udd73"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"The ",(0,i.kt)("inlineCode",{parentName:"li"},"root")," is saved at the moment when the entire ",(0,i.kt)("inlineCode",{parentName:"li"},"Patricia trie")," is downloaded."),(0,i.kt)("li",{parentName:"ol"},"We also clearly state that the node transitions to the ",(0,i.kt)("inlineCode",{parentName:"li"},"full sync"),"."),(0,i.kt)("li",{parentName:"ol"},"When you see the block being processed, then you are in the ",(0,i.kt)("inlineCode",{parentName:"li"},"full sync")," and the newly arrived block is being\ncalculated."),(0,i.kt)("li",{parentName:"ol"},"Every two minutes you will see a summary of connected peers with their client version, IP address, highest synced\nblock, and data download speeds.")),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"G\xf6rli full sync logs",src:n(7428).Z,width:"1441",height:"572"})),(0,i.kt)("p",null,"Also, every now and then, a peer report will appear like below:"),(0,i.kt)("p",null,(0,i.kt)("img",{src:n(78).Z,width:"2560",height:"1337"})),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"First bracket is for Allocated contexts. It has possible values of ",(0,i.kt)("inlineCode",{parentName:"li"},"H")," for Headers, ",(0,i.kt)("inlineCode",{parentName:"li"},"B")," for Bodies, ",(0,i.kt)("inlineCode",{parentName:"li"},"R")," for\nReceipts, ",(0,i.kt)("inlineCode",{parentName:"li"},"N")," for State, ",(0,i.kt)("inlineCode",{parentName:"li"},"S")," for Snap, and ",(0,i.kt)("inlineCode",{parentName:"li"},"W")," for Witness."),(0,i.kt)("li",{parentName:"ol"},"Second bracket is for Sleeping contexts. It has possible values of ",(0,i.kt)("inlineCode",{parentName:"li"},"H")," for Headers, ",(0,i.kt)("inlineCode",{parentName:"li"},"B")," for Bodies, ",(0,i.kt)("inlineCode",{parentName:"li"},"R")," for\nReceipts, ",(0,i.kt)("inlineCode",{parentName:"li"},"N")," for State, ",(0,i.kt)("inlineCode",{parentName:"li"},"S")," for Snap, and ",(0,i.kt)("inlineCode",{parentName:"li"},"W")," for Witness."),(0,i.kt)("li",{parentName:"ol"},"Third bracket contains Peer Info."),(0,i.kt)("li",{parentName:"ol"},"Fourth bracket is for Speeds as Follows:",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Latency"),(0,i.kt)("li",{parentName:"ul"},"Headers Transfer"),(0,i.kt)("li",{parentName:"ul"},"Bodies Transfer"),(0,i.kt)("li",{parentName:"ul"},"Receipts Transfer"),(0,i.kt)("li",{parentName:"ul"},"Node Data Transfer"),(0,i.kt)("li",{parentName:"ul"},"Snap Ranges Transfer"))),(0,i.kt)("li",{parentName:"ol"},"Fifth bracket is for Client Info like Client Name, Client Version, Operating System and Language Version.")))}c.isMDXComponent=!0},78:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/Screenshot2022-08-10205144-bfd083dd36a793971757cf3f339f0ec5.png"},6103:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/getting_started_26-95f467f0f83edd0b39d11b5d0ea338a5.png"},6833:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/getting_started_7-cfece39092ef238f8e8da3b69eab7432.png"},523:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/getting_started_8-d24674b3244863f2722c9dab5cb965d1.png"},7428:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/getting_started_9-37c7f085184a8606321fe307bec67a25.png"},7535:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/getting_started_log_0-ff150d1f099976816bf5d0f90c6c22ec.png"}}]);