"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[1356],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>m});var o=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,o,a=function(e,t){if(null==e)return{};var n,o,a={},r=Object.keys(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var c=o.createContext({}),l=function(e){var t=o.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},p=function(e){var t=l(e.components);return o.createElement(c.Provider,{value:t},e.children)},h="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},d=o.forwardRef((function(e,t){var n=e.components,a=e.mdxType,r=e.originalType,c=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),h=l(n),d=a,m=h["".concat(c,".").concat(d)]||h[d]||u[d]||r;return n?o.createElement(m,i(i({ref:t},p),{},{components:n})):o.createElement(m,i({ref:t},p))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=n.length,i=new Array(r);i[0]=d;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s[h]="string"==typeof e?e:a,i[1]=s;for(var l=2;l<r;l++)i[l]=n[l];return o.createElement.apply(null,i)}return o.createElement.apply(null,n)}d.displayName="MDXCreateElement"},3718:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>i,default:()=>u,frontMatter:()=>r,metadata:()=>s,toc:()=>l});var o=n(7462),a=(n(7294),n(3905));const r={title:"Consensus clients",sidebar_position:3},i=void 0,s={unversionedId:"get-started/consensus-clients",id:"get-started/consensus-clients",title:"Consensus clients",description:"Ethereum's long-awaited shift from proof-of-work (PoW) to proof-of-stake (PoS) known as The Merge happened on September 15, 2022, and came with fundamental changes to the network. The most notable change is the addition of the consensus layer (aka Beacon Chain) which replaced the PoW mining. It is coordinating and pseudorandomly selecting block producers from the pool of stakers/validators in a way that makes it extremely difficult for validators to coordinate attacks on the network.",source:"@site/docs/get-started/consensus-clients.md",sourceDirName:"get-started",slug:"/get-started/consensus-clients",permalink:"/docs/get-started/consensus-clients",draft:!1,editUrl:"https://github.com/NethermindEth/docs/tree/main/docs/docs/get-started/consensus-clients.md",tags:[],version:"current",lastUpdatedAt:1693730198,formattedLastUpdatedAt:"Sep 3, 2023",sidebarPosition:3,frontMatter:{title:"Consensus clients",sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"Installing Nethermind",permalink:"/docs/get-started/installing-nethermind"},next:{title:"Migrating from Geth",permalink:"/docs/get-started/migrating-from-geth"}},c={},l=[{value:"Choosing a consensus client",id:"choosing-a-consensus-client",level:2},{value:"Configuring JSON-RPC interface",id:"configuring-json-rpc-interface",level:2},{value:"Running the consensus client",id:"running-the-consensus-client",level:2},{value:"Running Lighthouse",id:"running-lighthouse",level:3},{value:"Running Lodestar",id:"running-lodestar",level:3},{value:"Running Nimbus",id:"running-nimbus",level:3},{value:"Running Prysm",id:"running-prysm",level:3},{value:"Running Teku",id:"running-teku",level:3},{value:"Running Nethermind",id:"running-nethermind",level:2}],p={toc:l},h="wrapper";function u(e){let{components:t,...n}=e;return(0,a.kt)(h,(0,o.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"Ethereum's long-awaited shift from proof-of-work (PoW) to proof-of-stake (PoS) known as The Merge happened on September 15, 2022, and came with fundamental changes to the network. The most notable change is the addition of the consensus layer (aka Beacon Chain) which replaced the PoW mining. It is coordinating and pseudorandomly selecting block producers from the pool of stakers/validators in a way that makes it extremely difficult for validators to coordinate attacks on the network.\nThe Merge changed how operators run nodes on the Ethereum blockchain. A node now needs two clients that work together as a pair. In addition to the ",(0,a.kt)("a",{parentName:"p",href:"https://ethereum.org/en/glossary/#execution-client"},"execution client")," (e.g., Nethermind), you need a ",(0,a.kt)("a",{parentName:"p",href:"https://ethereum.org/en/glossary/#consensus-client"},"consensus client")," that connects to the consensus layer and runs the PoS algorithm. This guide shows how to run an Ethereum node with Nethermind and a consensus client of your choice."),(0,a.kt)("admonition",{type:"tip"},(0,a.kt)("p",{parentName:"admonition"},"An easy way to run both consensus and execution clients is with ",(0,a.kt)("a",{parentName:"p",href:"https://docs.sedge.nethermind.io"},"Sedge"),". Sedge is a setup tool for PoS validators and nodes that runs on Linux and macOS.")),(0,a.kt)("h2",{id:"choosing-a-consensus-client"},"Choosing a consensus client"),(0,a.kt)("p",null,"On the consensus layer, there are 5 client implementations to choose from. Though all consensus clients are great, check them out yourself to find the one best suited to your needs."),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://lighthouse-book.sigmaprime.io"},"Lighthouse")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://chainsafe.github.io/lodestar"},"Lodestar")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://nimbus.guide"},"Nimbus")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://docs.prylabs.network"},"Prysm")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://docs.teku.consensys.net"},"Teku"))),(0,a.kt)("admonition",{title:"Important",type:"caution"},(0,a.kt)("p",{parentName:"admonition"},"We urge you to take ",(0,a.kt)("a",{parentName:"p",href:"https://ethereum.org/en/developers/docs/nodes-and-clients/client-diversity"},"client diversity")," into consideration when choosing your consensus client and avoid the majority clients.")),(0,a.kt)("h2",{id:"configuring-json-rpc-interface"},"Configuring JSON-RPC interface"),(0,a.kt)("p",null,"Execution and consensus clients communicate via an authenticated endpoint specified in Engine JSON-RPC API. In order to connect to a consensus client, the execution client must generate a ",(0,a.kt)("a",{parentName:"p",href:"https://jwt.io"},"JWT")," secret at a known path. Although the secret is generated automatically by Nethermind, in some cases, you might need to do it yourself. You can generate one using ",(0,a.kt)("a",{parentName:"p",href:"https://www.openssl.org"},"OpenSSL"),":"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"openssl rand -hex 32 > path/to/jwt.hex\n")),(0,a.kt)("admonition",{type:"note"},(0,a.kt)("p",{parentName:"admonition"},"Since the JWT secret is simply a 64-character hex value, there are many other ways of generating it, including online resources. However, for security reasons, we recommend using OpenSSL.")),(0,a.kt)("h2",{id:"running-the-consensus-client"},"Running the consensus client"),(0,a.kt)("p",null,"This step assumes that you have already ",(0,a.kt)("a",{parentName:"p",href:"/docs/get-started/installing-nethermind"},"installed")," Nethermind, the ",(0,a.kt)("a",{parentName:"p",href:"#choosing-a-consensus-client"},"consensus client")," of your choice, and, optionally, created the JWT secret. If you haven't created the JWT secret, Nethermind will create it on startup at ",(0,a.kt)("inlineCode",{parentName:"p"},"keystore/jwt-secret")," path in its root directory."),(0,a.kt)("admonition",{type:"info"},(0,a.kt)("p",{parentName:"admonition"},"As syncing from the scratch can take a very long time on some networks (up to several days), the commands below optionally use ",(0,a.kt)("a",{parentName:"p",href:"https://ethereum.org/en/developers/docs/nodes-and-clients/#checkpoint-sync"},"checkpoint sync")," to speed up the process.")),(0,a.kt)("h3",{id:"running-lighthouse"},"Running Lighthouse"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"./lighthouse bn \\\n  --network mainnet \\\n  --execution-endpoint http://localhost:8551 \\\n  --execution-jwt path/to/jwt.hex \\\n  --checkpoint-sync-url https://mainnet.checkpoint.sigp.io \\\n  --http\n")),(0,a.kt)("p",null,"The command above runs Lighthouse on Mainnet. For other networks, set the ",(0,a.kt)("inlineCode",{parentName:"p"},"--network")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"--checkpoint-sync-url")," options accordingly. See the ",(0,a.kt)("a",{parentName:"p",href:"https://lighthouse-book.sigmaprime.io"},"Lighthouse documentation")," and ",(0,a.kt)("a",{parentName:"p",href:"https://eth-clients.github.io/checkpoint-sync-endpoints"},"public checkpoint sync endpoints"),"."),(0,a.kt)("h3",{id:"running-lodestar"},"Running Lodestar"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"./lodestar beacon \\\n  --network mainnet \\\n  --jwt-secret path/to/jwt.hex \\\n  --checkpointSyncUrl https://beaconstate-mainnet.chainsafe.io\n")),(0,a.kt)("p",null,"The command above runs Lodestar on Mainnet. For other networks, set the ",(0,a.kt)("inlineCode",{parentName:"p"},"--network")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"--checkpointSyncUrl")," options accordingly. See the ",(0,a.kt)("a",{parentName:"p",href:"https://chainsafe.github.io/lodestar"},"Lodestar documentation")," and ",(0,a.kt)("a",{parentName:"p",href:"https://eth-clients.github.io/checkpoint-sync-endpoints"},"public checkpoint sync endpoints"),"."),(0,a.kt)("h3",{id:"running-nimbus"},"Running Nimbus"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"./run-mainnet-beacon-node.sh \\\n  --web3-url=http://127.0.0.1:8551 \\\n  --jwt-secret=path/to/jwt.hex\n")),(0,a.kt)("p",null,"The command above runs Numbus on Mainnet without checkpoint sync. For checkpoint sync, see ",(0,a.kt)("a",{parentName:"p",href:"https://nimbus.guide/trusted-node-sync.html"},"Sync from a trusted node"),". For other networks, see the ",(0,a.kt)("a",{parentName:"p",href:"https://nimbus.guide"},"Nimbus documentation"),"."),(0,a.kt)("h3",{id:"running-prysm"},"Running Prysm"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"./prysm.sh beacon-chain \\\n  --mainnet \\\n  --execution-endpoint=http://localhost:8551 \\\n  --jwt-secret=path/to/jwt.hex \\\n  --checkpoint-sync-url=https://beaconstate.ethstaker.cc \\\n  --genesis-beacon-api-url=https://beaconstate.ethstaker.cc\n")),(0,a.kt)("p",null,"The command above runs Prysm on Mainnet. For other networks, replace the ",(0,a.kt)("inlineCode",{parentName:"p"},"--mainnet")," and set ",(0,a.kt)("inlineCode",{parentName:"p"},"--checkpoint-sync-url")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"--genesis-beacon-api-url")," options accordingly. See the ",(0,a.kt)("a",{parentName:"p",href:"https://docs.prylabs.network"},"Prysm documentation")," and ",(0,a.kt)("a",{parentName:"p",href:"https://eth-clients.github.io/checkpoint-sync-endpoints"},"public checkpoint sync endpoints"),"."),(0,a.kt)("h3",{id:"running-teku"},"Running Teku"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"./teku \\\n  --network=mainnet \\\n  --ee-endpoint=http://localhost:8551 \\\n  --ee-jwt-secret-file=path/to/jwt.hex \\\n  --metrics-enabled=true \\\n  --rest-api-enabled=true \\\n  --initial-state=https://beaconstate.ethstaker.cc\n")),(0,a.kt)("p",null,"The command above runs Teku on Mainnet. For other networks, set the ",(0,a.kt)("inlineCode",{parentName:"p"},"--network")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"--initial-state")," options accordingly. See the ",(0,a.kt)("a",{parentName:"p",href:"https://docs.teku.consensys.net"},"Teku documentation")," and ",(0,a.kt)("a",{parentName:"p",href:"https://eth-clients.github.io/checkpoint-sync-endpoints"},"public checkpoint sync endpoints"),"."),(0,a.kt)("h2",{id:"running-nethermind"},"Running Nethermind"),(0,a.kt)("admonition",{title:"Important",type:"caution"},(0,a.kt)("p",{parentName:"admonition"},"The consensus client must be running before you start Nethermind.")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"./nethermind \\\n  -c mainnet \\\n  --JsonRpc.JwtSecretFile path/to/jwt.hex\n")),(0,a.kt)("p",null,"The command above runs Nethermind on Mainnet. For other networks, set the ",(0,a.kt)("inlineCode",{parentName:"p"},"-c")," option accordingly. For more info, see ",(0,a.kt)("a",{parentName:"p",href:"/docs/fundamentals/running-nethermind"},"Running Nethermind"),"."))}u.isMDXComponent=!0}}]);