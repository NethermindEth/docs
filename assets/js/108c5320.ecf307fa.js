"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[9391],{3905:(e,t,a)=>{a.d(t,{Zo:()=>c,kt:()=>b});var n=a(7294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var s=n.createContext({}),d=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},c=function(e){var t=d(e.components);return n.createElement(s.Provider,{value:t},e.children)},p="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,o=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),p=d(a),m=r,b=p["".concat(s,".").concat(m)]||p[m]||u[m]||o;return a?n.createElement(b,i(i({ref:t},c),{},{components:a})):n.createElement(b,i({ref:t},c))}));function b(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=a.length,i=new Array(o);i[0]=m;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[p]="string"==typeof e?e:r,i[1]=l;for(var d=2;d<o;d++)i[d]=a[d];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}m.displayName="MDXCreateElement"},2596:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>u,frontMatter:()=>o,metadata:()=>l,toc:()=>d});var n=a(7462),r=(a(7294),a(3905));const o={description:"dbpath and databases info"},i="Database",l={unversionedId:"fundamentals/database",id:"fundamentals/database",title:"Database",description:"dbpath and databases info",source:"@site/docs/02-fundamentals/07-database.md",sourceDirName:"02-fundamentals",slug:"/fundamentals/database",permalink:"/docs/docs/fundamentals/database",draft:!1,editUrl:"https://github.com/nethermindeth/docs/tree/main/docs/02-fundamentals/07-database.md",tags:[],version:"current",sidebarPosition:7,frontMatter:{description:"dbpath and databases info"},sidebar:"tutorialSidebar",previous:{title:"Explaining Nethermind logs",permalink:"/docs/docs/fundamentals/logs/logs"},next:{title:"How to reduce database size",permalink:"/docs/docs/fundamentals/how-to-reduce-database-size/"}},s={},d=[],c={toc:d},p="wrapper";function u(e){let{components:t,...o}=e;return(0,r.kt)(p,(0,n.Z)({},c,o,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"database"},"Database"),(0,r.kt)("p",null,"Nethermind uses the ",(0,r.kt)("a",{parentName:"p",href:"https://rocksdb.org"},"RocksDB")," database to store state. By default the database is stored in the\nsame directory where the client binaries are. You can change it by providing a ",(0,r.kt)("inlineCode",{parentName:"p"},"--baseDbPath")," config switch in the\ncommand line, e.g.",(0,r.kt)("inlineCode",{parentName:"p"},"./Nethermind.Runner --config goerli --baseDbPath /home/username/nethermind_db")),(0,r.kt)("p",null,"After Nethermind is started, you will see multiple directories appearing in the ",(0,r.kt)("em",{parentName:"p"},"baseDbPath")," directory."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Example of the DB directory on a freshly deployed Ubuntu VM with Nethermind.",src:a(2788).Z,width:"825",height:"521"})),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"DB Directory"),(0,r.kt)("th",{parentName:"tr",align:null},"Content"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"blockInfos"),(0,r.kt)("td",{parentName:"tr",align:null},"information about blocks at each level of the block tree (canonical chain and branches)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"blocks"),(0,r.kt)("td",{parentName:"tr",align:null},"block bodies (block transactions and uncle data)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"bloom"),(0,r.kt)("td",{parentName:"tr",align:null},"bloom indexes for fast log searches")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"canonicalHashTrie"),(0,r.kt)("td",{parentName:"tr",align:null},"LES protocol related data")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"code"),(0,r.kt)("td",{parentName:"tr",align:null},"contract bytecodes")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"discoveryNodes"),(0,r.kt)("td",{parentName:"tr",align:null},"peers discovered via discovery protocol - used for quick peering after restarts (you can copy this DB between nodes to speed up peering)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"headers"),(0,r.kt)("td",{parentName:"tr",align:null},"block headers only")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"pendingTx"),(0,r.kt)("td",{parentName:"tr",align:null},"(this DB is wiped out on each restart) 2nd level cache of pending transactions / mempool (1st level is in memory)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"peers"),(0,r.kt)("td",{parentName:"tr",align:null},"stores additional sync peers information (like peer reputation) - you can copy this DB between nodes to speed up peering on fresh sync")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"receipts"),(0,r.kt)("td",{parentName:"tr",align:null},"transaction receipts data")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"state"),(0,r.kt)("td",{parentName:"tr",align:null},"blockchain state including accounts and contract storage (Patricia trie nodes)")))),(0,r.kt)("p",null,"You can use ",(0,r.kt)("inlineCode",{parentName:"p"},"rsync")," between your nodes to clone the database (One of our users copied entire 4.5TB archive state this\nway while the node was running and only stopped the node for the very last stage of ",(0,r.kt)("inlineCode",{parentName:"p"},"rsync")," ). You can also simply copy\nthe database between Unix and Windows systems (and most likely macOS)."))}u.isMDXComponent=!0},2788:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/image(61)-4a7650d3cb287d936f5e64433ff88fde.png"}}]);