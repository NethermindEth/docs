<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-getting-started/migrating-from-geth">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">Migrating From Geth | Nethermind Documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://nethermind.github.io/docs/docs/getting-started/migrating-from-geth"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Migrating From Geth | Nethermind Documentation"><meta data-rh="true" name="description" content="To migrate from Geth to Nethermind there are few conditions which should be met to ensure seamless and quick transition."><meta data-rh="true" property="og:description" content="To migrate from Geth to Nethermind there are few conditions which should be met to ensure seamless and quick transition."><link data-rh="true" rel="icon" href="/docs/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://nethermind.github.io/docs/docs/getting-started/migrating-from-geth"><link data-rh="true" rel="alternate" href="https://nethermind.github.io/docs/docs/getting-started/migrating-from-geth" hreflang="en"><link data-rh="true" rel="alternate" href="https://nethermind.github.io/docs/docs/getting-started/migrating-from-geth" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/docs/blog/rss.xml" title="Nethermind Documentation RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/docs/blog/atom.xml" title="Nethermind Documentation Atom Feed"><link rel="stylesheet" href="/docs/assets/css/styles.b1e8c39c.css">
<link rel="preload" href="/docs/assets/js/runtime~main.2ddbb13c.js" as="script">
<link rel="preload" href="/docs/assets/js/main.76b6d27e.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/docs/"><b class="navbar__title text--truncate">Nethermind</b></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/NethermindEth/nethermind" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/docs">Welcome to Nethermind</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/docs/category/getting-started">Getting Started</a><button aria-label="Toggle the collapsible sidebar category &#x27;Getting Started&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/docs/getting-started/installing-nethermind">Installing Nethermind</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/docs/getting-started/system-requirements">System Requirements</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/docs/getting-started/networks">Networks</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/docs/getting-started/migrating-from-geth">Migrating From Geth</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/docs/getting-started/manage-nethermind-with-systemd">Manage Nethermind with systemd</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/docs/category/fundamentals">Fundamentals</a><button aria-label="Toggle the collapsible sidebar category &#x27;Fundamentals&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/docs/category/interacting-with-nethermind">Interacting With Nethermind</a><button aria-label="Toggle the collapsible sidebar category &#x27;Interacting With Nethermind&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/docs/category/monitoring">Monitoring</a><button aria-label="Toggle the collapsible sidebar category &#x27;Monitoring&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/docs/category/for-developers">For Developers</a><button aria-label="Toggle the collapsible sidebar category &#x27;For Developers&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/docs/category/nethermind-utilities">Nethermind Utilities</a><button aria-label="Toggle the collapsible sidebar category &#x27;Nethermind Utilities&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/docs/category/resources">Resources</a><button aria-label="Toggle the collapsible sidebar category &#x27;Resources&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/docs/Contact">Contact Us</a></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/docs/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/docs/category/getting-started"><span itemprop="name">Getting Started</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Migrating From Geth</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Migrating From Geth</h1><p>To migrate from Geth to Nethermind there are few conditions which should be met to ensure seamless and quick transition.</p><p>First of all there is need to check <strong>if disk is big enough.</strong> Most secure way would be to have a Nethermind node synced
on the same machine as Geth but without stopping Geth. It will give a chance to check Nethermind if sync was properly
executed, verify if everything works correctly and will reduce downtime of node to bare minimum. Such option will be
recommended to any public JsonRpc provider or Validators.</p><p>If disk is big enough, recommended workflow of action
is <a href="/docs/docs/getting-started/migrating-from-geth#option-1a---sync-nethermind-next-to-geth">#option-1a-sync-nethermind-next-to-geth</a>
or <a href="/docs/docs/getting-started/migrating-from-geth#option-1b---use-sedge-to-install-nethermind-next-to-geth-quickly">#option-1b-use-sedge-to-install-nethermind-next-to-geth-quickly</a>.</p><p>If disk is not big enough but downtime is not an option recommended would be to first try to increase disk space or if
not possible to extend existing setup, then host Nethermind on separate machine, sync it and whenever it completes its
work, move everything validator related to that machine and abandon first machine.</p><p>On the other hand, if downtime of around <!-- -->~<!-- -->12h is not a problem, then suggested would be to go
with <a href="/docs/docs/getting-started/migrating-from-geth#option-2---remove-geth-and-sync-nethermind">#option-2-remove-geth-and-sync-nethermind</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="option-1a---sync-nethermind-next-to-geth">Option 1a - Sync Nethermind next to Geth<a href="#option-1a---sync-nethermind-next-to-geth" class="hash-link" aria-label="Direct link to Option 1a - Sync Nethermind next to Geth" title="Direct link to Option 1a - Sync Nethermind next to Geth">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="step-1---download-nethermind-latest-release">Step 1 - Download Nethermind latest release<a href="#step-1---download-nethermind-latest-release" class="hash-link" aria-label="Direct link to Step 1 - Download Nethermind latest release" title="Direct link to Step 1 - Download Nethermind latest release">​</a></h4><p>Please refer to
a <a href="/docs/docs/getting-started/installing-nethermind">#step-1-installing-nethermind</a> to see
available options or use <a href="https://docs.sedge.nethermind.io/" target="_blank" rel="noopener noreferrer"><strong>Sedge</strong> </a> which is a one-click setup tool for running
node
developed by Nethermind Team (refer
to <a href="/docs/docs/getting-started/migrating-from-geth#option-1b---use-sedge-to-install-nethermind-next-to-geth-quickly">#option-1b-use-sedge-to-install-nethermind-next-to-geth-quickly</a>).</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="step-2---run-secondary-cl-client-for-nethermind-syncing-purpose-only">Step 2 - Run secondary CL client for Nethermind syncing purpose only<a href="#step-2---run-secondary-cl-client-for-nethermind-syncing-purpose-only" class="hash-link" aria-label="Direct link to Step 2 - Run secondary CL client for Nethermind syncing purpose only" title="Direct link to Step 2 - Run secondary CL client for Nethermind syncing purpose only">​</a></h4><p>Please refer to
a <a href="/docs/docs/fundamentals/running-nethermind-post-merge#step-2-installing-consensus-client">#step-2-installing-consensus-client</a>
to install secondary CL client beacon node which will be used only for Nethermind syncing purpose.\
Once it is installed ensure it is not colliding with primary CL currently used by Geth.</p><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p><strong>EXAMPLE</strong>\
In case of running Geth + Prysm as a primary node, and configuring second pair which will be Nethermind + Prysm, for
second instance of Prysm, flags needed to be used are (considering that primary one is using default values):\
<code>--rpc-port=4001 --p2p-tcp-port=13001 --p2p-udp-port=12001 --grpc-gateway-port=3501</code></p></div></div><div class="theme-admonition theme-admonition-caution alert alert--warning admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_S0QG"><p><strong>REMEMBER</strong>\
Nethermind node will also be running on separate ports so there should be
a <code>--execution-endpoint=http://localhost:&lt;&lt;NETHERMIND_ENGINE_PORT&gt;&gt;</code> flag set keeping in mind that
NETHERMIND<!-- -->_<!-- -->ENGINE<!-- -->_<!-- -->PORT should be changed to value selected in next step (preferably 8552)</p></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="step-3---run-nethermind-and-wait-for-sync">Step 3 - Run Nethermind and wait for Sync<a href="#step-3---run-nethermind-and-wait-for-sync" class="hash-link" aria-label="Direct link to Step 3 - Run Nethermind and wait for Sync" title="Direct link to Step 3 - Run Nethermind and wait for Sync">​</a></h4><p>Please refer to a <a href="/docs/docs/fundamentals/running-nethermind-post-merge#step-4-run-nethermind">#step-4-run-nethermind</a>for
instruction on how to run Nethermind.</p><div class="theme-admonition theme-admonition-caution alert alert--warning admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_S0QG"><p><strong>REMEMBER</strong></p><p>For Nethermind You will also need to set a separate ports to not create a conflict with still working Geth node. Values
needed to be changed with recommended values:\
<code>--JsonRpc.Port 8546 --JsonRpc.EnginePort 8552 --Network.DiscoveryPort 30304 --Network.P2PPort 30304</code></p></div></div><p>Now Nethermind node should be syncing well using second CL configured on machine. To monitor status of syncing there is
a JsonRPC call which can be
used <a href="/docs/docs/interacting-with-nethermind/json-rpc-api/eth#eth_syncing">#eth<!-- -->_<!-- -->syncing</a>.
Whenever this endpoint will return &quot;false&quot;, node is considered as fully synced with all bodies and receipts needed to
work properly as a Validator.</p><p>Another option is to use a health module which will also return a information about current state of syncing.</p><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_S0QG"><p>You can see more details of how to monitor <a href="/docs/docs/monitoring/monitoring-node-health">Node Health here</a></p></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="step-4---stop-geth-instance">Step 4 - Stop Geth instance<a href="#step-4---stop-geth-instance" class="hash-link" aria-label="Direct link to Step 4 - Stop Geth instance" title="Direct link to Step 4 - Stop Geth instance">​</a></h4><p>Now it is time to stop Geth. In order to do that stop Geth command/service/docker container. It depends on a way Geth
was started initially. \
Ensure it is stopped properly and is not progressing before moving to next step.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="step-5---stop-secondary-cl-and-restart-nethermind-using-ports-assigned-for-geth-before">Step 5 - Stop secondary CL and restart Nethermind using ports assigned for Geth before<a href="#step-5---stop-secondary-cl-and-restart-nethermind-using-ports-assigned-for-geth-before" class="hash-link" aria-label="Direct link to Step 5 - Stop secondary CL and restart Nethermind using ports assigned for Geth before" title="Direct link to Step 5 - Stop secondary CL and restart Nethermind using ports assigned for Geth before">​</a></h4><p>After Geth is properly stopped and removed, restart your nethermind client but now without flags from point 3 (or adjust
them to use the same ports which were used by Geth).\
Also stop a secondary CL client to ensure that after that step only Nethermind and CL1 (used before to talk with Geth)
are started only.</p><p>Also important would be to restart primary CL using jwt-secret used by Nethermind. For that purpose, you can either use
flags in CL to point to Nethermind jwtsecret or point Nethermind to that jwtsecret using command:
<code>--JsonRpc.JwtSecretFile &quot;path/to/jwtsecret.hex&quot;</code></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="step-6---ensure-your-setup-works-well-after-changes">Step 6 - Ensure Your setup works well after changes<a href="#step-6---ensure-your-setup-works-well-after-changes" class="hash-link" aria-label="Direct link to Step 6 - Ensure Your setup works well after changes" title="Direct link to Step 6 - Ensure Your setup works well after changes">​</a></h4><p>To see if nodes are progressing properly check logs of both Nethermind and CL to check if there are no warnings/errors -
especially ones about authentication which may tell about invalid jwtsecret used or no jwt configured.</p><p>Also check if Your Nethermind node is following chain properly. From logs you can extract messages like:
<code>Block &lt;&lt;HASH&gt;&gt; was set as head.</code></p><p>Compare a hash from log to hash of corresponding block on <a href="https://etherscan.io/" target="_blank" rel="noopener noreferrer">https://etherscan.io/</a> to see if node
is progressing well.</p><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p><strong>EXAMPLE</strong>
Logs from Nethermind:
<code>Block 0x13cebe2db23cc09fb386fa4a470d6dac3dfca65e11968472f5a1f3681191beab was set as head. 20 Feb 2023 14:56:36.987</code>
<code>FCU - block 16670194 (0x13cebe...91beab) was processed.</code></p><p><code>Block on etherscan:</code>
<a href="https://etherscan.io/block/16670194" target="_blank" rel="noopener noreferrer"><code>https://etherscan.io/block/16670194</code></a></p><p>Block number and block hash matches information from logs.</p></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="step-7---remove-geth-and-secondary-cl">Step 7 - Remove Geth and secondary CL<a href="#step-7---remove-geth-and-secondary-cl" class="hash-link" aria-label="Direct link to Step 7 - Remove Geth and secondary CL" title="Direct link to Step 7 - Remove Geth and secondary CL">​</a></h4><p>In this step you can remove Geth database and secondary CL used for Nethermind syncing.
For Geth in order to remove db, remove <code>.ethereum</code> directory (default may be <code>/root/.ethereum</code> or path set on geth
startup). Also there is a command which can be used to remove Geth db:</p><p><code>sudo geth --datadir /var/lib/goethereum removedb</code></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="option-1b---use-sedge-to-install-nethermind-next-to-geth-quickly">Option 1b - Use Sedge to install Nethermind next to Geth quickly<a href="#option-1b---use-sedge-to-install-nethermind-next-to-geth-quickly" class="hash-link" aria-label="Direct link to Option 1b - Use Sedge to install Nethermind next to Geth quickly" title="Direct link to Option 1b - Use Sedge to install Nethermind next to Geth quickly">​</a></h3><p>Sedge is a one-click tool which can host entire node on your machine withing a single command taking care of ports,
checkpoint sync, connection between EL and CL etc.
There is a documentation of Sedge located here: <a href="https://docs.sedge.nethermind.io/" target="_blank" rel="noopener noreferrer">https://docs.sedge.nethermind.io/</a></p><p>High level flow would be similar to Option 1a, but Sedge would automatically take care of Steps 1,2 and 3.</p><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p>To add additional flags to Sedge, use <code>--el-extra-flag JsonRpc.Port=8546</code> or --cl-extra-flag <code>rpc-port=4001</code></p></div></div><p>Later on step 5 you can edit a <code>docker-compose.yml</code> file and remove all extra flags which were passed to EL or CL and
simply restart a node using commands:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> compose stop execution</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> compose up -d execution</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="option-2---remove-geth-and-sync-nethermind">Option 2 - Remove Geth and sync Nethermind<a href="#option-2---remove-geth-and-sync-nethermind" class="hash-link" aria-label="Direct link to Option 2 - Remove Geth and sync Nethermind" title="Direct link to Option 2 - Remove Geth and sync Nethermind">​</a></h3><p>This option is quicker since does not require to adjust configuration of EL or CL to not collide with currently running
setup.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="step-1---stop-and-remove-geth-and-its-db-from-disk">Step 1 - Stop and remove Geth and its DB from disk<a href="#step-1---stop-and-remove-geth-and-its-db-from-disk" class="hash-link" aria-label="Direct link to Step 1 - Stop and remove Geth and its DB from disk" title="Direct link to Step 1 - Stop and remove Geth and its DB from disk">​</a></h4><p>First of all, Geth and its DB needs to be removed. Stop Geth process, find a <code>.ethereum</code> directory and remove it
completely. Also there is a command which can be used to remove Geth db:</p><p><code>sudo geth --datadir /var/lib/goethereum removedb</code></p><p>Ensure that Geth is stopped properly - it is crucial since it acquires ports which are common between other clients so
it may cause some unexpected problems during procedure of syncing Nethermind.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="step-2---download-nethermind-latest-release">Step 2 - Download Nethermind latest release<a href="#step-2---download-nethermind-latest-release" class="hash-link" aria-label="Direct link to Step 2 - Download Nethermind latest release" title="Direct link to Step 2 - Download Nethermind latest release">​</a></h4><p>Please refer to
a <a href="/docs/docs/fundamentals/running-nethermind-post-merge#step-1-installing-nethermind">#step-1-installing-nethermind</a> to see
available options or use <a href="https://docs.sedge.nethermind.io/" target="_blank" rel="noopener noreferrer"><strong>Sedge</strong> </a> which is a one-click setup tool for running
node
developed by Nethermind Team.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="step-3---reconfigure-cl-and-run-nethermind">Step 3 - Reconfigure CL and run Nethermind<a href="#step-3---reconfigure-cl-and-run-nethermind" class="hash-link" aria-label="Direct link to Step 3 - Reconfigure CL and run Nethermind" title="Direct link to Step 3 - Reconfigure CL and run Nethermind">​</a></h4><p>Important thing in PoS chains like Ethereum Mainnet is to properly setup a connection between EL and CL. JwtSecret which
is used for that communication is needed to be set properly. For that purpose, you can either use flags in CL to point
to Nethermind jwtsecret or point Nethermind to that jwtsecret using command:\
<code>--JsonRpc.JwtSecretFile &quot;path/to/jwtsecret.hex&quot;</code></p><p>Nethermind will generate jwtsecret in <code>keystore</code> directory and if not specified, it will use this secret.</p><p>After reconfiguring CL, run Nethermind an monitor it. Please refer to
a <a href="/docs/docs/fundamentals/running-nethermind-post-merge#step-5-run-nethermind">#step-4-run-nethermind</a>for instruction on how to
run Nethermind.</p><p>Now Nethermind node should be syncing well using CL reconfigured on machine. To monitor status of syncing there is a
JsonRPC call which can be used <a href="/docs/docs/interacting-with-nethermind/json-rpc-api/eth#eth_syncing">#eth<!-- -->_<!-- -->syncing</a>.
Whenever this endpoint will return &quot;false&quot;, node is considered as fully synced with all bodies and receipts needed to
work properly as a Validator.</p><p>Another option is to use a health module which will also return a information about current state of syncing.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="step-4---ensure-your-setup-works-well-after-changes">Step 4 - Ensure Your setup works well after changes<a href="#step-4---ensure-your-setup-works-well-after-changes" class="hash-link" aria-label="Direct link to Step 4 - Ensure Your setup works well after changes" title="Direct link to Step 4 - Ensure Your setup works well after changes">​</a></h4><p>To see if nodes are progressing properly check logs of both Nethermind and CL to check if there are no warnings/errors -
especially ones about authentication which may tell about invalid jwtsecret used or no jwt configured.</p><p>Also check if Your Nethermind node is following chain properly. From logs you can extract messages like:
<code>Block &lt;&lt;HASH&gt;&gt; was set as head.</code></p><p>Compare a hash from log to hash of corresponding block on <a href="https://etherscan.io/" target="_blank" rel="noopener noreferrer">https://etherscan.io/</a> to see if node
is progressing well.</p><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p><strong>EXAMPLE</strong>
Logs from Nethermind:
<code>Block 0x13cebe2db23cc09fb386fa4a470d6dac3dfca65e11968472f5a1f3681191beab was set as head. 20 Feb 2023 14:56:36.987</code>
<code>FCU - block 16670194 (0x13cebe...91beab) was processed.</code></p><p><code>Block on etherscan:</code>
<a href="https://etherscan.io/block/16670194" target="_blank" rel="noopener noreferrer"><code>https://etherscan.io/block/16670194</code></a></p><p>Block number and block hash matches information from logs.</p></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/NethermindEth/docs/tree/main/docs/docs/01-getting-started/migrating-from-geth.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/docs/getting-started/networks"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Networks</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/docs/getting-started/manage-nethermind-with-systemd"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Manage Nethermind with systemd</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#option-1a---sync-nethermind-next-to-geth" class="table-of-contents__link toc-highlight">Option 1a - Sync Nethermind next to Geth</a></li><li><a href="#option-1b---use-sedge-to-install-nethermind-next-to-geth-quickly" class="table-of-contents__link toc-highlight">Option 1b - Use Sedge to install Nethermind next to Geth quickly</a></li><li><a href="#option-2---remove-geth-and-sync-nethermind" class="table-of-contents__link toc-highlight">Option 2 - Remove Geth and sync Nethermind</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/">Docs</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://discord.com/invite/PaCMRFdvWT" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/nethermindeth" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/NethermindEth/nethermind" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 Nethermind. Built with Docusaurus.</div></div></div></footer></div>
<script src="/docs/assets/js/runtime~main.2ddbb13c.js"></script>
<script src="/docs/assets/js/main.76b6d27e.js"></script>
</body>
</html>